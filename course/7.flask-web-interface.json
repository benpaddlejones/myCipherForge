{
  "id": "flask-web-interface",
  "title": "Building the Flask Web Interface",
  "sections": [
    {
      "type": "markdown",
      "content": {
        "text": "# Lesson 7: Building the Flask Web Interface\n\n### Learning Objectives\n\nBy the end of this lesson, you will:\n\n- Create a Flask application with multiple routes\n- Build HTML templates with Jinja2 templating\n- Create forms for user input\n- Connect your encryption algorithm to a web interface\n- Test encryption through a browser\n\n---\n\n## From Algorithm to Application\n\nYou've built a powerful 5-phase encryption algorithm. But right now, the only way to use it is through the Python REPL. Let's create a **web interface** so anyone can encrypt and decrypt messages!\n\n### What We'll Build\n\n| Page | Purpose |\n|------|----------|\n| **Home** | Dashboard showing algorithm info |\n| **Workshop** | Encrypt and decrypt messages |\n\n---\n\n## Step 1: Create the Flask Application\n\n**Create a new file `app.py`** in your project root (same folder as `engine.py`):\n\n```python\n\"\"\"CipherForge Flask Web Application.\n\nProvides a web interface for the 5-phase encryption algorithm.\n\"\"\"\n\nfrom flask import Flask, render_template, request\nfrom engine import encrypt, decrypt\n\napp = Flask(__name__)\n\n\n@app.route(\"/\")\ndef index():\n    \"\"\"Display the homepage.\"\"\"\n    return render_template(\"index.html\")\n\n\n@app.route(\"/workshop\", methods=[\"GET\", \"POST\"])\ndef workshop():\n    \"\"\"Handle encryption and decryption requests.\"\"\"\n    result = \"\"\n    original = \"\"\n    \n    if request.method == \"POST\":\n        # Get form data\n        original = request.form.get(\"message\", \"\")\n        action = request.form.get(\"action\", \"encrypt\")\n        \n        # Build the key from form inputs\n        key = {\n            \"shift\": int(request.form.get(\"shift\", 5)),\n            \"block_size\": int(request.form.get(\"block_size\", 4)),\n            \"password\": request.form.get(\"password\", \"SECRET\"),\n            \"noise_interval\": int(request.form.get(\"noise_interval\", 3)),\n            \"noise_char\": request.form.get(\"noise_char\", \"~\")\n        }\n        \n        # Perform the operation\n        if action == \"encrypt\":\n            result = encrypt(original, key)\n        else:\n            result = decrypt(original, key)\n    \n    return render_template(\"workshop.html\", result=result, original=original)\n\n\nif __name__ == \"__main__\":\n    app.run(debug=True, host=\"0.0.0.0\", port=5000)\n```"
      }
    },
    {
      "type": "mcq",
      "title": "Flask Route",
      "content": {
        "question": "What does `@app.route(\"/workshop\", methods=[\"GET\", \"POST\"])` mean?",
        "options": [
          "Create a file called workshop",
          "Map the URL /workshop to the function below, accepting GET and POST requests",
          "Import the workshop module",
          "Create a workshop variable"
        ],
        "correct_index": 1,
        "explanation": "The @app.route() decorator maps a URL path to a Python function. When someone visits /workshop, Flask calls the workshop() function. The methods=[\"GET\", \"POST\"] means it accepts both viewing the page (GET) and submitting forms (POST)."
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 2: Create the Templates Folder\n\nFlask looks for HTML templates in a `templates/` folder.\n\n**Create the templates folder**:\n\n```bash\nmkdir templates\n```\n\n---\n\n## Step 3: Create the Base Template\n\nThe base template provides the layout shared by all pages.\n\n**Create `templates/base.html`**:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CipherForge</title>\n    <!-- Bootstrap CSS -->\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <style>\n        body {\n            background-color: #1a1a2e;\n            color: #eee;\n            min-height: 100vh;\n        }\n        .navbar {\n            background: linear-gradient(90deg, #16213e 0%, #0f3460 100%);\n        }\n        .card {\n            background-color: #16213e;\n            border: 1px solid #0f3460;\n        }\n        .form-control, .form-select {\n            background-color: #0f3460;\n            border-color: #16213e;\n            color: #eee;\n        }\n        .form-control:focus, .form-select:focus {\n            background-color: #16213e;\n            border-color: #e94560;\n            color: #eee;\n            box-shadow: 0 0 10px rgba(233, 69, 96, 0.3);\n        }\n        .btn-primary {\n            background-color: #e94560;\n            border-color: #e94560;\n        }\n        .btn-primary:hover {\n            background-color: #ff6b6b;\n            border-color: #ff6b6b;\n        }\n        .result-box {\n            background-color: #0f3460;\n            border: 2px solid #e94560;\n            border-radius: 8px;\n            padding: 20px;\n            font-family: 'Courier New', monospace;\n            word-break: break-all;\n        }\n    </style>\n</head>\n<body>\n    <nav class=\"navbar navbar-expand-lg navbar-dark mb-4\">\n        <div class=\"container\">\n            <a class=\"navbar-brand\" href=\"/\">\ud83d\udd10 CipherForge</a>\n            <div class=\"navbar-nav\">\n                <a class=\"nav-link\" href=\"/\">Home</a>\n                <a class=\"nav-link\" href=\"/workshop\">Workshop</a>\n            </div>\n        </div>\n    </nav>\n    \n    <main class=\"container\">\n        {% block content %}{% endblock %}\n    </main>\n    \n    <footer class=\"text-center mt-5 py-3 text-muted\">\n        <small>CipherForge \u00a9 2026 | MIT License</small>\n    </footer>\n    \n    <!-- Bootstrap JS -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>\n```"
      }
    },
    {
      "type": "mcq",
      "title": "Jinja Block",
      "content": {
        "question": "What is the purpose of `{% block content %}{% endblock %}` in Jinja2?",
        "options": [
          "Creates a CSS block for styling",
          "Defines a placeholder where child templates insert their content",
          "Imports JavaScript code",
          "Creates a database table"
        ],
        "correct_index": 1,
        "explanation": "Jinja2 blocks define areas where child templates can insert their own content. The base template has the shared layout (navbar, footer), and each page template 'extends' it and fills in the content block with page-specific HTML."
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 4: Create the Home Page\n\n**Create `templates/index.html`**:\n\n```html\n{% extends \"base.html\" %}\n\n{% block content %}\n<div class=\"row\">\n    <div class=\"col-lg-8 mx-auto text-center\">\n        <h1 class=\"display-4 mb-4\">\ud83d\udd10 CipherForge</h1>\n        <p class=\"lead mb-5\">\n            A 5-phase encryption algorithm built from scratch.\n        </p>\n        \n        <div class=\"row g-4\">\n            <div class=\"col-md-6\">\n                <div class=\"card h-100\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">\ud83d\udcdd Phase 1: Substitution</h5>\n                        <p class=\"card-text\">Shift all characters by a fixed amount</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">\n                <div class=\"card h-100\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">\ud83d\udd04 Phase 2: Transposition</h5>\n                        <p class=\"card-text\">Reverse characters in blocks</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">\n                <div class=\"card h-100\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">\ud83d\udd11 Phase 3: Key-Dependent</h5>\n                        <p class=\"card-text\">Password-based variable shifting</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-md-6\">\n                <div class=\"card h-100\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">\ud83d\udce1 Phase 4: Noise Injection</h5>\n                        <p class=\"card-text\">Add decoy characters to confuse attackers</p>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-12\">\n                <div class=\"card\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">\ud83c\udccf Phase 5: Wild Card</h5>\n                        <p class=\"card-text\">Your unique encryption contribution!</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <a href=\"/workshop\" class=\"btn btn-primary btn-lg mt-5\">\n            \ud83d\udee0\ufe0f Go to Workshop\n        </a>\n    </div>\n</div>\n{% endblock %}\n```"
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 5: Create the Workshop Page\n\nThis is the main interface where users encrypt and decrypt messages.\n\n**Create `templates/workshop.html`**:\n\n```html\n{% extends \"base.html\" %}\n\n{% block content %}\n<div class=\"row\">\n    <div class=\"col-lg-10 mx-auto\">\n        <h1 class=\"mb-4\">\ud83d\udee0\ufe0f CipherForge Workshop</h1>\n        \n        <div class=\"row g-4\">\n            <!-- Input Form -->\n            <div class=\"col-lg-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h5 class=\"mb-0\">Message & Key Settings</h5>\n                    </div>\n                    <div class=\"card-body\">\n                        <form method=\"POST\" action=\"/workshop\">\n                            <!-- Message Input -->\n                            <div class=\"mb-3\">\n                                <label for=\"message\" class=\"form-label\">Message</label>\n                                <textarea class=\"form-control\" id=\"message\" name=\"message\" \n                                          rows=\"4\" placeholder=\"Enter your message here...\">{{ original }}</textarea>\n                            </div>\n                            \n                            <!-- Key Settings -->\n                            <div class=\"row g-2 mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"shift\" class=\"form-label\">Shift (Phase 1)</label>\n                                    <input type=\"number\" class=\"form-control\" id=\"shift\" \n                                           name=\"shift\" value=\"5\" min=\"1\" max=\"94\">\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"block_size\" class=\"form-label\">Block Size (Phase 2)</label>\n                                    <input type=\"number\" class=\"form-control\" id=\"block_size\" \n                                           name=\"block_size\" value=\"4\" min=\"2\" max=\"20\">\n                                </div>\n                            </div>\n                            \n                            <div class=\"mb-3\">\n                                <label for=\"password\" class=\"form-label\">Password (Phase 3)</label>\n                                <input type=\"text\" class=\"form-control\" id=\"password\" \n                                       name=\"password\" value=\"SECRET\" placeholder=\"Enter encryption password\">\n                            </div>\n                            \n                            <div class=\"row g-2 mb-3\">\n                                <div class=\"col-md-6\">\n                                    <label for=\"noise_interval\" class=\"form-label\">Noise Interval (Phase 4)</label>\n                                    <input type=\"number\" class=\"form-control\" id=\"noise_interval\" \n                                           name=\"noise_interval\" value=\"3\" min=\"2\" max=\"10\">\n                                </div>\n                                <div class=\"col-md-6\">\n                                    <label for=\"noise_char\" class=\"form-label\">Noise Character</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"noise_char\" \n                                           name=\"noise_char\" value=\"~\" maxlength=\"1\">\n                                </div>\n                            </div>\n                            \n                            <!-- Action Buttons -->\n                            <div class=\"d-grid gap-2\">\n                                <button type=\"submit\" name=\"action\" value=\"encrypt\" \n                                        class=\"btn btn-primary btn-lg\">\ud83d\udd12 Encrypt</button>\n                                <button type=\"submit\" name=\"action\" value=\"decrypt\" \n                                        class=\"btn btn-outline-primary btn-lg\">\ud83d\udd13 Decrypt</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- Result Display -->\n            <div class=\"col-lg-6\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h5 class=\"mb-0\">Result</h5>\n                    </div>\n                    <div class=\"card-body\">\n                        {% if result %}\n                        <div class=\"result-box\">\n                            <code>{{ result }}</code>\n                        </div>\n                        <div class=\"mt-3\">\n                            <small class=\"text-muted\">\n                                Original length: {{ original|length }} characters<br>\n                                Result length: {{ result|length }} characters\n                            </small>\n                        </div>\n                        {% else %}\n                        <div class=\"text-center text-muted py-5\">\n                            <p>Enter a message and click Encrypt or Decrypt</p>\n                            <p class=\"lead\">Your encrypted/decrypted result will appear here</p>\n                        </div>\n                        {% endif %}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}\n```"
      }
    },
    {
      "type": "mcq",
      "title": "Form Action",
      "content": {
        "question": "In the form `<form method=\"POST\" action=\"/workshop\">`, what does `method=\"POST\"` mean?",
        "options": [
          "The form data is sent in the browser's address bar",
          "The form data is sent in the request body (hidden from URL)",
          "The form is read-only",
          "The form sends data to a different website"
        ],
        "correct_index": 1,
        "explanation": "POST sends form data in the HTTP request body, keeping it hidden from the URL. This is more secure for sensitive data like passwords. GET would put all form data in the URL (e.g., /workshop?message=Hello&shift=5), which is visible and logged everywhere."
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 6: Test Your Web Application\n\nNow let's run your Flask application!\n\n### Start the Server\n\n```bash\npython app.py\n```\n\nYou should see:\n```\n\n * Running on http://0.0.0.0:5000\n * Debugger is active!\n```\n\n### Open in Browser\n\nIn Codespaces:\n\n1. Click the **Ports** tab at the bottom\n2. Find port **5000**\n3. Click the globe icon (\ud83c\udf10) to open in browser\n\n### Test the Application\n\n1. **Home page**: You should see the CipherForge dashboard with 5 phase cards\n2. **Workshop**: Click \"Go to Workshop\" or the Workshop nav link\n3. **Encrypt a message**:\n   - Enter: `Hello World!`\n   - Keep default key settings\n   - Click **Encrypt**\n   - You should see scrambled ciphertext!\n4. **Decrypt**: Copy the ciphertext, paste it, click **Decrypt**\n   - You should get `Hello World!` back!"
      }
    },
    {
      "type": "written_response",
      "title": "Webapp Test",
      "content": {
        "description": "Run your Flask application and test it in the browser. Encrypt the message \"CipherForge works!\" using the default key settings. Report:\n\n1. The encrypted output you received\n2. Whether decrypting it returned the original message\n3. Any issues you encountered and how you fixed them",
        "example_answer": "Encrypted 'CipherForge works!' with default settings.\n\nEncrypted output: `.q~r}Y~xmy~rtp{~jlx~r$~\n\nDecrypted back to: CipherForge works!\n\nThe round-trip works perfectly! I had one issue initially - Flask couldn't find the templates because I put them in the wrong folder. After moving them to the templates/ folder, everything worked.",
        "min_words": 30
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 7: Understanding the Data Flow\n\nLet's trace what happens when you click **Encrypt**:\n\n```\n\n1. Browser sends POST request to /workshop\n       \u2193\n\n2. Flask's workshop() function receives the request\n       \u2193\n\n3. request.form.get() extracts message and key values\n       \u2193\n\n4. encrypt(message, key) calls your engine.py function\n       \u2193\n\n5. Phase 1 \u2192 2 \u2192 3 \u2192 4 \u2192 5 transformations run\n       \u2193\n\n6. Result returned to workshop() function\n       \u2193\n\n7. render_template() passes result to workshop.html\n       \u2193\n\n8. Jinja2 replaces {{ result }} with actual ciphertext\n       \u2193\n\n9. Complete HTML sent back to browser\n       \u2193\n\n10. Browser displays the encrypted result!\n```\n\nThis is the **Model-View-Controller (MVC)** pattern:\n\n- **Model**: `engine.py` (the logic)\n- **View**: `templates/*.html` (what users see)\n- **Controller**: `app.py` routes (connects them)"
      }
    },
    {
      "type": "mcq",
      "title": "MVC Pattern",
      "content": {
        "question": "In the MVC pattern, which component is responsible for the actual encryption logic?",
        "options": [
          "The View (HTML templates)",
          "The Controller (Flask routes)",
          "The Model (engine.py)",
          "The Browser"
        ],
        "correct_index": 2,
        "explanation": "The Model contains the business logic \u2014 in this case, your encryption algorithm in engine.py. The View (templates) handles display. The Controller (app.py routes) coordinates between them, receiving user input and calling the appropriate model functions."
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "## Step 8: Add Error Handling (Optional Enhancement)\n\nMake your app more robust by handling errors gracefully.\n\n**Update `app.py`** \u2014 modify the workshop function:\n\n```python\n@app.route(\"/workshop\", methods=[\"GET\", \"POST\"])\ndef workshop():\n    \"\"\"Handle encryption and decryption requests.\"\"\"\n    result = \"\"\n    original = \"\"\n    error = \"\"\n    \n    if request.method == \"POST\":\n        try:\n            # Get form data\n            original = request.form.get(\"message\", \"\")\n            action = request.form.get(\"action\", \"encrypt\")\n            \n            # Validate message is not empty\n            if not original.strip():\n                error = \"Please enter a message to encrypt or decrypt.\"\n            else:\n                # Build the key from form inputs\n                key = {\n                    \"shift\": int(request.form.get(\"shift\", 5)),\n                    \"block_size\": int(request.form.get(\"block_size\", 4)),\n                    \"password\": request.form.get(\"password\", \"SECRET\"),\n                    \"noise_interval\": int(request.form.get(\"noise_interval\", 3)),\n                    \"noise_char\": request.form.get(\"noise_char\", \"~\")\n                }\n                \n                # Perform the operation\n                if action == \"encrypt\":\n                    result = encrypt(original, key)\n                else:\n                    result = decrypt(original, key)\n        except Exception as e:\n            error = f\"Error: {str(e)}\"\n    \n    return render_template(\"workshop.html\", result=result, original=original, error=error)\n```\n\n**Update `templates/workshop.html`** \u2014 add error display after the form:\n\nAdd this right before the Result card:\n\n```html\n{% if error %}\n<div class=\"alert alert-danger mt-3\">\n    \u26a0\ufe0f {{ error }}\n</div>\n{% endif %}\n```"
      }
    },
    {
      "type": "markdown",
      "content": {
        "text": "---\n\n## Checkpoint: Commit Your Web Interface\n\n```bash\ngit add -A\ngit commit -m \"feat: Add Flask web interface for CipherForge\"\ngit push\n```\n\n---\n\n## Project Structure Summary\n\nYour CipherForge project should now look like this:\n\n```\nCipherForge/\n\u251c\u2500\u2500 .devcontainer/       \u2190 Codespaces configuration\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 copilot-instructions.md\n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 base.html        \u2190 Layout template (navbar, footer, styles)\n\u2502   \u251c\u2500\u2500 index.html       \u2190 Homepage with phase cards\n\u2502   \u2514\u2500\u2500 workshop.html    \u2190 Encrypt/decrypt interface\n\u251c\u2500\u2500 app.py               \u2190 Flask routes (controller)\n\u251c\u2500\u2500 engine.py            \u2190 Encryption algorithm (model)\n\u251c\u2500\u2500 LICENSE              \u2190 MIT license\n\u2514\u2500\u2500 README.md            \u2190 Project documentation\n```\n\n---\n\n## What You Built\n\n| Component | File | Purpose |\n|-----------|------|----------|\n| Flask App | `app.py` | Web server routes |\n| Homepage | `templates/index.html` | Dashboard showing phases |\n| Workshop | `templates/workshop.html` | Encrypt/decrypt forms |\n| Layout | `templates/base.html` | Shared styling and navigation |\n\n---\n\n## Next Lesson Preview\n\nIn **Lesson 8: Testing and Documentation**, you'll:\n\n- Write comprehensive tests for your algorithm\n- Complete your README documentation\n- Prepare your project for presentation\n- Reflect on your encryption journey\n\nYour web app is live \u2014 now let's make sure it's production-ready!"
      }
    }
  ]
}